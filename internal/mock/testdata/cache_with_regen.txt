# Tests regeneration of existing files.

replace ../../../.. $MUT go.mod

mockgen

cmpenv stdout stdout.golden

cmpenv stderr stderr.golden

cmp mock_gen.go golden

-- stdout.golden --
-- stderr.golden --
mockgen: example.com: wrote $WORK/mock_gen.go
-- cache.go --
package cache

type Cache interface {
	Put(key string, value any) error
	Get(key string) (value any, ok bool)
	Delete(string)
	Load(...string)
}
-- go.mod --
module example.com

go 1.20

require github.com/Versent/go-mock v0.0.0-00010101000000-000000000000

replace github.com/Versent/go-mock => ../../../..
-- mock.go --
//go:build mockstub

package cache

type mockCache struct {
	Cache
}
-- mock_gen.go --
// Code generated by mockgen. DO NOT EDIT.

//go:generate go run -mod=mod github.com/Versent/go-mock/cmd/mockgen
//go:build !mockstub
// +build !mockstub

package cache

import (
	mock "github.com/Versent/go-mock"
	testing "testing"
)

var _ Cache = (*mockCache)(nil)

func ExpectDelete(delegate func(_ testing.TB, v0 string)) func(*mockCache) {
	return mock.Expect[mockCache]("Delete", delegate)
}

func ExpectManyDelete(delegate func(_ testing.TB, _ mock.CallCount, v0 string)) func(*mockCache) {
	return mock.ExpectMany[mockCache]("Delete", delegate)
}

func (m *mockCache) Delete(v0 string) {
	mock.Call0(m, "Delete", v0)
}

func ExpectGet(delegate func(_ testing.TB, key string) (value any, ok bool)) func(*mockCache) {
	return mock.Expect[mockCache]("Get", delegate)
}

func ExpectManyGet(delegate func(_ testing.TB, _ mock.CallCount, key string) (value any, ok bool)) func(*mockCache) {
	return mock.ExpectMany[mockCache]("Get", delegate)
}

func (m *mockCache) Get(key string) (value any, ok bool) {
	return mock.Call2[any, bool](m, "Get", key)
}

func ExpectLoad(delegate func(_ testing.TB, v0 []string)) func(*mockCache) {
	return mock.Expect[mockCache]("Load", delegate)
}

func ExpectManyLoad(delegate func(_ testing.TB, _ mock.CallCount, v0 []string)) func(*mockCache) {
	return mock.ExpectMany[mockCache]("Load", delegate)
}

func (m *mockCache) Load(v0 ...string) {
	mock.Call0(m, "Load", v0)
}

func ExpectPut(delegate func(_ testing.TB, key string, value any) error) func(*mockCache) {
	return mock.Expect[mockCache]("Put", delegate)
}

func ExpectManyPut(delegate func(_ testing.TB, _ mock.CallCount, key string, value any) error) func(*mockCache) {
	return mock.ExpectMany[mockCache]("Put", delegate)
}

func (m *mockCache) Put(key string, value any) error {
	return mock.Call1[error](m, "Put", key, value)
}

type mockCache struct {
	_ byte // prevent zero-size struct
}
-- golden --
// Code generated by mockgen. DO NOT EDIT.

//go:generate go run -mod=mod github.com/Versent/go-mock/cmd/mockgen
//go:build !mockstub
// +build !mockstub

package cache

import (
	mock "github.com/Versent/go-mock"
	testing "testing"
)

var _ Cache = (*mockCache)(nil)

func ExpectDelete(delegate func(_ testing.TB, v0 string)) func(*mockCache) {
	return mock.Expect[mockCache]("Delete", delegate)
}

func ExpectManyDelete(delegate func(_ testing.TB, _ mock.CallCount, v0 string)) func(*mockCache) {
	return mock.ExpectMany[mockCache]("Delete", delegate)
}

func (m *mockCache) Delete(v0 string) {
	mock.Call0(m, "Delete", v0)
}

func ExpectGet(delegate func(_ testing.TB, key string) (value any, ok bool)) func(*mockCache) {
	return mock.Expect[mockCache]("Get", delegate)
}

func ExpectManyGet(delegate func(_ testing.TB, _ mock.CallCount, key string) (value any, ok bool)) func(*mockCache) {
	return mock.ExpectMany[mockCache]("Get", delegate)
}

func (m *mockCache) Get(key string) (value any, ok bool) {
	return mock.Call2[any, bool](m, "Get", key)
}

func ExpectLoad(delegate func(_ testing.TB, v0 []string)) func(*mockCache) {
	return mock.Expect[mockCache]("Load", delegate)
}

func ExpectManyLoad(delegate func(_ testing.TB, _ mock.CallCount, v0 []string)) func(*mockCache) {
	return mock.ExpectMany[mockCache]("Load", delegate)
}

func (m *mockCache) Load(v0 ...string) {
	mock.Call0(m, "Load", v0)
}

func ExpectPut(delegate func(_ testing.TB, key string, value any) error) func(*mockCache) {
	return mock.Expect[mockCache]("Put", delegate)
}

func ExpectManyPut(delegate func(_ testing.TB, _ mock.CallCount, key string, value any) error) func(*mockCache) {
	return mock.ExpectMany[mockCache]("Put", delegate)
}

func (m *mockCache) Put(key string, value any) error {
	return mock.Call1[error](m, "Put", key, value)
}

type mockCache struct {
	_ byte // prevent zero-size struct
}
